<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>학생 성적</title>
  <style>
    :root{--bd:#e7e7e7;--tx:#111;--muted:rgba(0,0,0,.62);--bg:#fff}
    *{box-sizing:border-box}
    body{font-family:system-ui,Apple SD Gothic Neo,Malgun Gothic,sans-serif;margin:14px;background:var(--bg);color:var(--tx)}
    .wrap{max-width:980px;margin:0 auto}
    .topAdmin{display:none}
    body.is-admin .topAdmin{display:block}
    .card{border:1px solid var(--bd);border-radius:18px;padding:16px;margin:12px 0;background:#fff}
    .title{font-size:22px;font-weight:900;margin:0 0 8px;line-height:1.2}
    .meta{color:var(--muted);line-height:1.65}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .btn{display:inline-block;border:1px solid #111;border-radius:12px;padding:10px 14px;text-decoration:none;color:#111;background:#fff}
    .btn:hover{background:#fafafa}

    .scoreHeader{display:flex;align-items:flex-end;justify-content:space-between;gap:10px;padding:2px 2px 10px 2px}
    .hLeft{min-width:0}
    .hName{font-size:18px;font-weight:900;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .hSub{margin-top:4px;color:var(--muted);font-weight:800}
    .hRight{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .badge{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--bd);border-radius:999px;padding:8px 12px;font-weight:900;background:#fff;white-space:nowrap}

    .cards{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    @media(min-width:760px){.cards{grid-template-columns:repeat(5,1fr)}}
    .scard{border:1px solid var(--bd);border-radius:16px;padding:12px 12px 10px;background:#fff;min-width:0}
    .scTop{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .sub{font-weight:900}
    .pct{font-weight:900;color:var(--muted)}
    .raw{margin-top:10px;font-size:26px;font-weight:1000;letter-spacing:-.5px;line-height:1}
    .raw small{font-size:14px;font-weight:900;color:var(--muted)}
    .hint{margin-top:6px;color:var(--muted);font-weight:800;font-size:12px}

    table{border-collapse:collapse;width:100%}
    th,td{border-bottom:1px solid #f0f0f0;padding:10px;text-align:left;font-size:13px;vertical-align:middle}
    th{background:#fafafa;position:sticky;top:0;z-index:1;font-weight:1000}
    .num{text-align:right;font-variant-numeric:tabular-nums}
    .cell{display:flex;gap:8px;align-items:baseline;justify-content:flex-end}
    .cell .r{font-weight:1000}
    .cell .p{color:var(--muted);font-weight:900}
    .muted{color:var(--muted);font-weight:800}

    .tablebox{border:1px solid var(--bd);border-radius:16px;overflow:auto;-webkit-overflow-scrolling:touch;background:#fff}

    details{border:1px solid var(--bd);border-radius:16px;padding:12px;background:#fff}
    details>summary{cursor:pointer;list-style:none;font-weight:1000;display:flex;justify-content:space-between;align-items:center}
    details>summary::-webkit-details-marker{display:none}
    .tools{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:12px 0 0}
    select{border:1px solid var(--bd);border-radius:12px;padding:10px 12px;font-weight:900;background:#fff;max-width:100%}

    #shareCard,#shareBox,#shareLinks,#shareArea,.share-card,.shareBox,.share-area,.share-links{display:none!important;visibility:hidden!important;height:0!important;margin:0!important;padding:0!important;border:0!important}
  </style>
</head>
<body>
<div class="wrap">

  <div class="card topAdmin" id="adminTop">
    <div class="title" id="adminHdr">학생</div>
    <div class="meta" id="adminMeta"></div>
    <div class="row" id="adminLinks"></div>
  </div>

  <div class="card">
    <div class="scoreHeader">
      <div class="hLeft">
        <div class="hName" id="nameLine">-</div>
        <div class="hSub" id="latestLine">최신 성적: -</div>
      </div>
      <div class="hRight" id="badges"></div>
    </div>

    <div class="cards" id="cards"></div>

    <div style="height:12px"></div>

    <div class="tablebox" id="recentBox" style="max-height:380px"></div>

    <div style="height:12px"></div>

    <details id="allDetails">
      <summary><span>전체 회차 보기</span><span class="muted">펼치기</span></summary>
      <div class="tools">
        <label class="muted">회차 빠른 이동</label>
        <select id="jumpSel"></select>
      </div>
      <div style="height:10px"></div>
      <div class="tablebox" id="allBox" style="max-height:520px"></div>
    </details>
  </div>

</div>

<script>
(() => {
  const ADMIN_TOKEN = "CHANGE_ME_ADMIN";
  const qs = new URLSearchParams(location.search);
  const admin = qs.get("admin");
  const isAdmin = (String(admin||"").trim() === String(ADMIN_TOKEN).trim());
  if(isAdmin) document.body.classList.add("is-admin");

  window.__STUDENT_CTX__ = {
    isAdmin,
    idParam: qs.get("id"),
    tParam: qs.get("t") || qs.get("token"),
    ADMIN_TOKEN
  };

  const s = document.createElement("script");
  s.src = new URL("./student.js?v=20260215_scores_only_v2", location.href).toString();
  s.defer = true;
  document.body.appendChild(s);
})();
</script>
</body>
</html>
